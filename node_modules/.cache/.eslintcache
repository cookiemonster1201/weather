[{"/Users/alenamikituk/Documents/IT/weather/src/index.js":"1","/Users/alenamikituk/Documents/IT/weather/src/App.js":"2","/Users/alenamikituk/Documents/IT/weather/src/redux/store.js":"3","/Users/alenamikituk/Documents/IT/weather/src/pages/MainPage.js":"4","/Users/alenamikituk/Documents/IT/weather/src/redux/slices/countriesSlice.js":"5","/Users/alenamikituk/Documents/IT/weather/src/redux/slices/weatherSlice.js":"6","/Users/alenamikituk/Documents/IT/weather/src/redux/weather/weatherSelectors.js":"7","/Users/alenamikituk/Documents/IT/weather/src/redux/countries/countriesSelectors.js":"8"},{"size":607,"mtime":1650658891479,"results":"9","hashOfConfig":"10"},{"size":396,"mtime":1650795027282,"results":"11","hashOfConfig":"10"},{"size":911,"mtime":1650658891480,"results":"12","hashOfConfig":"10"},{"size":2983,"mtime":1650873944488,"results":"13","hashOfConfig":"10"},{"size":2962,"mtime":1650872920432,"results":"14","hashOfConfig":"10"},{"size":1230,"mtime":1650870254190,"results":"15","hashOfConfig":"10"},{"size":66,"mtime":1650658891480,"results":"16","hashOfConfig":"10"},{"size":57,"mtime":1650658891479,"results":"17","hashOfConfig":"10"},{"filePath":"18","messages":"19","suppressedMessages":"20","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1sq7da8",{"filePath":"21","messages":"22","suppressedMessages":"23","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"24","messages":"25","suppressedMessages":"26","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"27","messages":"28","suppressedMessages":"29","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"30"},{"filePath":"31","messages":"32","suppressedMessages":"33","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"34","usedDeprecatedRules":"35"},{"filePath":"36","messages":"37","suppressedMessages":"38","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"35"},{"filePath":"39","messages":"40","suppressedMessages":"41","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"42","messages":"43","suppressedMessages":"44","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/alenamikituk/Documents/IT/weather/src/index.js",[],[],"/Users/alenamikituk/Documents/IT/weather/src/App.js",[],[],"/Users/alenamikituk/Documents/IT/weather/src/redux/store.js",[],[],"/Users/alenamikituk/Documents/IT/weather/src/pages/MainPage.js",["45","46","47","48"],[],"import React, { useState,useEffect } from 'react';\nimport { Link, Route, Routes } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { v4 as uuidv4 } from 'uuid';\nimport { fetchWeatherAction } from '../redux/slices/weatherSlice';\nimport { getSearchedWeather } from '../redux/weather/weatherSelectors';\nimport { getCountries } from '../redux/countries/countriesSelectors';\nimport { addCountry,removeCountry, updateWeatherAction } from '../redux/slices/countriesSlice';\nimport axios from 'axios';\n\n\nexport default function MainPage() {\n    const dispatch = useDispatch();\n    const searchCountry = useSelector(getSearchedWeather)\n    const countries = useSelector(getCountries);\n    const [city, setCity] = useState('');\n\n    const [cities, setCities] = useState([]);\n\n    const onHandleChange = (e) => {\n      setCity(e.target.value)\n    }\n\n    const onHandleSearch = () => {\n      dispatch(fetchWeatherAction(city))\n      setCity('')\n    }\n\n    useEffect(() => {\n      countries?.forEach((country) => {\n          axios.get(`/weather?q=${country}&appid=d0aef4da9ac1a34e09e4ce9ff137ae24&units=imperial`).then(({data}) => {\n            // const updated = cities.filter(cityObj => cityObj.name === country);\n            // setCities(updated)\n            setCities(pr => {\n              if (pr && pr?.find(c => c.name === country)) {\n                return pr\n              }\n            return [...pr, data]\n          });\n      })\n    })\n    console.log('effect', cities, countries)\n    }, [countries]);\n\n    const { weather, loading } = searchCountry;\n    console.log('render')\n      return (\n          <>\n            <h1>\n          Hello world\n            </h1>\n            <input placeholder='Enter city' value={city} onChange={onHandleChange} />\n        <button onClick={onHandleSearch}>Search</button>\n          {weather ? (\n        <div style={{margin:'0 auto', background:'grey', width:'150px'}}>\n          <p>{weather.name}</p>\n          <p>{weather.id}</p>\n          <p>{weather.dt}</p>\n          <button onClick={()=>dispatch(addCountry(weather.name))}>add to your countries</button>\n        </div>\n      ) :\n        (<h2>make a search</h2>)}\n      <h3>Your favourites countries</h3>\n      {cities ? (\n        <ul style={{display:'flex', flexWrap:'wrap', margin:'0 auto'}}>\n          {cities.map((c,idx) => (\n            <li style={{ border: '1px solid black',cursor:'pointer' }} key={uuidv4()}><p>{c.name}</p>\n              <p>{console.log('c.id', c.id)}</p>\n                  <p>{c.dt}</p>\n                  <div>\n                      <Link to={`/details/${c.name}`}>Details</Link>\n                  </div>\n                  <button onClick={() => dispatch(removeCountry(c.name))}>remove</button>\n                  <button onClick={() => dispatch(updateWeatherAction({ lon: c.coord.lon, lat: c.coord.lat, idx: idx }))\n                  }>update</button>\n            </li>))}\n      </ul>\n          ):(<h4>No favourites HERE</h4>)}\n</>)\n}\n","/Users/alenamikituk/Documents/IT/weather/src/redux/slices/countriesSlice.js",["49","50"],[],"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport { useSelector } from \"react-redux\";\nimport { getCountries } from \"../countries/countriesSelectors\";\n// axios.defaults.baseURL = 'https://api.openweathermap.org/data/2.5';\n\nconst updateElById = (arr, idx, updateData) => arr.map((item, id, arr) => arr.indexOf(item) === idx ? updateData : item)\n\nconst deleteCity = (arr, name) => {\n  console.log(arr, name)\n  return arr.filter((el) => name !== el)\n}\n\nexport const updateWeatherAction = createAsyncThunk(\n  \"weather/updateWeather\",\n    async (payload, { rejectWithValue, getState, dispatch }) => {\n        const { lat, lon, idx } = payload;\n        try {\n          const { data } = await axios.get(`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=d0aef4da9ac1a34e09e4ce9ff137ae24&units=imperial`);\n          return {data, idx}\n      } catch (error) {\n      if (!error?.response) {\n        throw error;\n      }\n      return rejectWithValue(error?.response?.data);\n    }\n  }\n);\n\nconst countriesSlice = createSlice({\n    name: 'countries',\n    initialState: {\n        arr: [],\n        error: null,\n        loading:false\n    },\n    reducers: {\n        addCountry: (state, { payload }) => {\n          state.arr = !state.arr.includes(payload) ? [...state.arr, payload] : state.arr\n        },\n        removeCountry: (state, { payload }) => {\n          state.arr = [...deleteCity(state.arr, payload)]\n        },\n        // updateCountry: (state, {payload}) => {state.arr = updateElById(state.arr, payload.idx, payload.data)}\n        \n    },\n    extraReducers: {\n          [updateWeatherAction.pending]: (state, action) => {\n            state.loading = true;\n            },\n          [updateWeatherAction.fulfilled]: (state, { payload }) => {\n            state.arr = updateElById(state.arr, payload.idx, payload.data)\n            },\n        //     .addCase(updateWeatherAction.fulfilled, (state, {payload}) => {\n        //             state.loading = false,\n        //             state.error = null\n        //         }\n        // )\n        //     .addCase(updateWeatherAction.fulfilled, (state, action) => {\n        //         const findIndex = state.arr.reduce((acc, country, index) => \n        //             if (country.name === action.payload.name) {\n        //                 return acc += index\n        //             }\n        //             return acc;\n        //         }, 0)\n        //         return {\n        //             state.arr[findIndex] = action.payload,\n        //             state.loading = false,\n        //             state.error = null\n        //         }\n        //     }\n        // )\n        [updateWeatherAction.rejected]: (state, action) => {\n            state.error = action?.payload;\n            state.loading = false;\n            }\n          }  \n})\n\n\nexport const { addCountry,removeCountry } = countriesSlice.actions;\nexport default countriesSlice.reducer;",[],"/Users/alenamikituk/Documents/IT/weather/src/redux/slices/weatherSlice.js",[],[],"/Users/alenamikituk/Documents/IT/weather/src/redux/weather/weatherSelectors.js",[],[],"/Users/alenamikituk/Documents/IT/weather/src/redux/countries/countriesSelectors.js",[],[],{"ruleId":"51","severity":1,"message":"52","line":2,"column":16,"nodeType":"53","messageId":"54","endLine":2,"endColumn":21},{"ruleId":"51","severity":1,"message":"55","line":2,"column":23,"nodeType":"53","messageId":"54","endLine":2,"endColumn":29},{"ruleId":"56","severity":1,"message":"57","line":43,"column":8,"nodeType":"58","endLine":43,"endColumn":19,"suggestions":"59"},{"ruleId":"51","severity":1,"message":"60","line":45,"column":22,"nodeType":"53","messageId":"54","endLine":45,"endColumn":29},{"ruleId":"51","severity":1,"message":"61","line":3,"column":10,"nodeType":"53","messageId":"54","endLine":3,"endColumn":21},{"ruleId":"51","severity":1,"message":"62","line":4,"column":10,"nodeType":"53","messageId":"54","endLine":4,"endColumn":22},"no-unused-vars","'Route' is defined but never used.","Identifier","unusedVar","'Routes' is defined but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'cities'. Either include it or remove the dependency array.","ArrayExpression",["63"],"'loading' is assigned a value but never used.","'useSelector' is defined but never used.","'getCountries' is defined but never used.",{"desc":"64","fix":"65"},"Update the dependencies array to be: [cities, countries]",{"range":"66","text":"67"},[1523,1534],"[cities, countries]"]